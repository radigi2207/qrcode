
<html>
  <script src="https://unpkg.com/html5-qrcode"></script>
  <body>
    <div id="qr-reader" style="width:500px"></div>
    <div id="qr-reader-results"></div>
  </body>
  <script type="text/javascript">
    var resultContainer = document.getElementById('qr-reader-results');
    var lastResult, countResults = 0;

    function onScanSuccess(decodedText, decodedResult) {
      window.open(decodedText);
//         if (decodedText !== lastResult) {
//             ++countResults;
//             lastResult = decodedText;
//             // Handle on success condition with the decoded message.
//             console.log(`Scan result ${decodedText}`, decodedResult);
//         }
    }
    
    // This method will trigger user permissions
    Html5Qrcode.getCameras().then(devices => {
      /**
       * devices would be an array of objects of type:
       * { id: "id", label: "label" }
       */
      if (devices && devices.length) {
        var cameraId = devices[0].id;
        const html5QrCode = new Html5Qrcode("qr-reader");
        html5QrCode.start(
          cameraId, 
          {
            fps: 30,    // Optional, frame per seconds for qr code scanning
            qrbox: { width: 250, height: 250 }  // Optional, if you want bounded box UI
          },
          (decodedText, decodedResult) => {
            // do something when code is read
          },
          (errorMessage) => {
            // parse error, ignore it.
          })
        .catch((err) => {
          // Start failed, handle it.
        });
      }
    }).catch(err => {
      // handle err
    });

    
  </script>
</html>
