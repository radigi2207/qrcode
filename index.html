<html>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <body>
      <div id="qr-reader" style="width:100%"></div>
      <div id="qr-reader-results"></div>
    </body>
    <script type="text/javascript">
      var resultContainer = document.getElementById('qr-reader-results');
      var lastResult, countResults = 0;
  
      function onScanSuccess(decodedText, decodedResult) {
        window.open(decodedText);
  //         if (decodedText !== lastResult) {
  //             ++countResults;
  //             lastResult = decodedText;
  //             // Handle on success condition with the decoded message.
  //             console.log(`Scan result ${decodedText}`, decodedResult);
  //         }
      }
      
      Html5Qrcode.getCameras().then(devices => {
        /**
         * devices would be an array of objects of type:
         * { id: "id", label: "label" }
         */
        if (devices && devices.length) {
          var a = devices.length;
          var cameraId = devices[a-1].id;
          const html5QrCode = new Html5Qrcode("qr-reader");
          html5QrCode.start(
            cameraId, 
            {
              fps: 10,   
              qrbox: { width: 350, height: 350 }  
            },
            (decodedText, decodedResult) => {
              alert(decodedText);
            },
            (errorMessage) => {
            })
          .catch((err) => {
          });
        }
      }).catch(err => {
        // handle err
      });
    </script>
  </html>
